<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Luyện Tập Code</title>
    <meta
      name="description"
      content="Trang tổng quan cá nhân cho sinh viên luyện tập lập trình. Theo dõi tiến độ, thứ hạng và tham gia các kỳ thi."
    />
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Custom Bootstrap 5 CSS -->
    <link rel="stylesheet" href="/sinhvien/css/student-bs5.css" />
    <!-- Theme CSS -->
    <link rel="stylesheet" href="/css/theme.css" />
    <script src="/js/theme.js"></script>
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      .nav-card {
        background: var(--nav-card-bg);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid var(--glass-border) !important;
        transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        text-decoration: none;
        display: block;
        height: 100%;
        position: relative;
        overflow: hidden;
      }
      .nav-card::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          225deg,
          rgba(88, 166, 255, 0.1) 0%,
          transparent 50%
        );
        opacity: 0;
        transition: opacity 0.4s ease;
      }
      .nav-card:hover {
        background: rgba(88, 166, 255, 0.12);
        border-color: var(--accent);
        transform: translateY(-8px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
      }
      .nav-card:hover::after {
        opacity: 1;
      }
      .activity-item {
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }
      .activity-item:last-child {
        border-bottom: none;
      }
      .status-pill {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
      }
      .status-pill.success {
        background: rgba(63, 185, 80, 0.15);
        color: #3fb950;
      }
      .user-avatar {
        width: 32px;
        height: 32px;
        background: rgba(88, 166, 255, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--accent);
        font-size: 1.2rem;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg sticky-top">
      <div class="container">
        <a class="navbar-brand" href="/dashboard">
          <i class="bi bi-code-slash"></i>
          Luyện tập<span>Code</span>
        </a>
        <button
          class="navbar-toggler border-0"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
            <li class="nav-item">
              <a class="nav-link active" href="/dashboard">
                <i class="bi bi-house-door"></i> Trang chủ
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/exams">
                <i class="bi bi-journal-text"></i> Kỳ thi
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/history">
                <i class="bi bi-clock-history"></i> Lịch sử
              </a>
            </li>
          </ul>
          <div class="navbar-nav align-items-center gap-1">
            <button
              class="theme-toggle-btn"
              id="theme-toggle-btn"
              onclick="toggleTheme()"
              title="Chuyển giao diện"
            >
              <i class="bi bi-sun-fill" id="theme-icon"></i>
            </button>
            <div class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
              >
                <div class="d-inline-flex align-items-center">
                  <div class="user-avatar me-2">
                    <i class="bi bi-person-circle"></i>
                  </div>
                  <span id="nav-user-display" class="fw-medium">Sinh viên</span>
                </div>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a class="dropdown-item" href="/profile"
                    ><i class="bi bi-person"></i> Hồ sơ cá nhân</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/history"
                    ><i class="bi bi-bar-chart"></i> Tiến độ học tập</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a class="dropdown-item text-danger" href="/api/auth/logout"
                    ><i class="bi bi-box-arrow-right"></i> Đăng xuất</a
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <main class="container py-5">
      <!-- Welcome Section -->
      <section class="mb-5">
        <h1 id="welcome-msg" class="display-5 fw-bold mb-2">
          Chào mừng trở lại!
        </h1>
        <p class="text-muted lead">Hôm nay bạn muốn rèn luyện kỹ năng nào?</p>
      </section>

      <!-- Stats Grid -->
      <section class="row g-4 mb-5">
        <div class="col-md-3">
          <div class="card stat-card h-100 p-4">
            <div class="text-muted small mb-2 text-uppercase fw-bold">
              Bài tập đã giải
            </div>
            <div class="h2 fw-bold mb-0" id="stat-solved">0/0</div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stat-card h-100 p-4">
            <div class="text-muted small mb-2 text-uppercase fw-bold">
              Lượt nộp bài
            </div>
            <div class="h2 fw-bold mb-0" id="stat-subs">0</div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stat-card h-100 p-4">
            <div class="text-muted small mb-2 text-uppercase fw-bold">
              Thứ hạng
            </div>
            <div class="h2 fw-bold mb-0" id="stat-rank">#--</div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card stat-card h-100 p-4">
            <div class="text-muted small mb-2 text-uppercase fw-bold">
              Tỷ lệ thành công
            </div>
            <div class="h2 fw-bold mb-0" id="stat-rate">0%</div>
          </div>
        </div>
      </section>

      <!-- Nav Grid -->
      <section class="row g-4 mb-5">
        <div class="col-md-6">
          <a href="/exercise" class="nav-card p-5 rounded-4 border-0">
            <h2 class="h3 fw-bold mb-3">Luyện tập tự do</h2>
            <p class="text-muted mb-0 lead">
              Khám phá kho bài tập và cải thiện tư duy lập trình.
            </p>
          </a>
        </div>
        <div class="col-md-6">
          <a href="/exams" class="nav-card p-5 rounded-4 border-0">
            <h2 class="h3 fw-bold mb-3">Kỳ thi đang mở</h2>
            <p class="text-muted mb-0 lead">
              Tham gia các bài kiểm tra thực tế để đánh giá năng lực.
            </p>
          </a>
        </div>
      </section>

      <!-- Recent Activity -->
      <section class="card border-0">
        <div class="card-body p-4">
          <h3 class="h4 fw-bold mb-4">Hoạt động gần đây</h3>
          <div id="activity-list">
            <!-- Data loaded via JS -->
            <div class="text-muted text-center py-4">Đang tải hoạt động...</div>
          </div>
        </div>
      </section>
    </main>

    <footer class="container py-4 mt-5 text-center">
      <p class="mb-1 text-muted small">
        Hệ thống hỗ trợ học tập &copy; 2026 - Luyện Tập Code
      </p>
      <p class="text-muted small mb-0">
        create by <strong>Đàm Văn Luận</strong>
      </p>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/sinhvien/js/dashboard.js"></script>
  </body>
</html>
